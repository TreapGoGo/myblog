---
title: 分块入门 区间和 解题笔记
date: 2023-07-26 22:30:35
tags: ["算法数据结构", "题解", "数据结构", "分块"]
---

# 题目来源

[LibreOJ 6280 数列分块入门 4](https://loj.ac/problem/6280)

# 题意简述

序列区间加与查询区间和， $n\le5\times 10^4$ 。

# 解题思路

分块，不是整块的部分暴力求解，是整块的部分打标记。

重点在时间复杂度的计算上。

最坏复杂度为操作区间几乎覆盖整个序列时，此时中间的整块数量近似于 $\displaystyle\frac{n}{s}$ ，两端的非整块长度为 $2s$ 。忽略常数，单次操作最坏时间复杂度为 $\displaystyle O(\frac{n}{s}+s)$ 。

运用基本不等式 $\displaystyle\frac{n}{s}+s\ge2\sqrt{\frac{n}{s}\cdot s}=2\sqrt{n}$ ，当且仅当 $s=\sqrt{n}$ 时取等，由此确定了最优块长。

关于代码实现，本题的 std 代码为分块题目提供了基本的范式。

```cpp=
1233123
123123
2131231
```